repos:
  - repo: https://github.com/psf/black
    rev: 24.8.0
    hooks:
      - id: black
        stages: [pre-commit] 

  - repo: https://github.com/charliermarsh/ruff-pre-commit
    rev: v0.6.3
    hooks:
      - id: ruff
        stages: [pre-commit] 

  - repo: https://github.com/PyCQA/isort
    rev: 5.13.2
    hooks:
      - id: isort
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: notify-reformat
        name: Notify developer to re-add and commit
        entry: |
          bash -c '
          CHANGED=$(git diff --name-only --diff-filter=M | grep -E "\.py$")
          if [ -n "$CHANGED" ]; then
            echo ""
            echo -e "âš™ï¸  \033[33mThe following files were automatically reformatted:\033[0m"
            echo ""
            # ğŸ”¹ é€è¡Œè¼¸å‡ºï¼Œæ¯è¡Œä¸€å€‹æª”æ¡ˆ
            while IFS= read -r file; do
              echo -e "   \033[34m$file\033[0m"
            done <<< "$CHANGED"
            echo ""
            echo -e "ğŸ‘‰  \033[32mPlease review them, run: git add <files>  and commit again.\033[0m"
            echo ""
            exit 1
          fi
          '
        language: system
        pass_filenames: false
        stages: [pre-commit]

  - repo: local
    hooks:
      - id: pytest-before-push
        name: Run pytest before push
        entry: pytest
        language: system
        pass_filenames: false
        stages: [pre-push]

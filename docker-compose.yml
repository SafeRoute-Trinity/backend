version: "3.9"

services:
  user_management:
    build:
      context: .
      dockerfile: services/user_management/dockerfile
    image: saferoute/user-management:latest
    container_name: saferoute-user-management
    platform: linux/amd64
    ports:
      - "20000:20000"
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped

  notification:
    build:
      context: .
      dockerfile: services/notification/dockerfile
    image: saferoute/notification:latest
    container_name: saferoute-notification
    platform: linux/amd64
    ports:
      - "20001:20001"
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped

  routing_service:
    build:
      context: .
      dockerfile: services/routing_service/dockerfile
    image: saferoute/routing-service:latest
    container_name: saferoute-routing-service
    platform: linux/amd64
    ports:
      - "20002:20002"
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped

  safety_scoring:
    build:
      context: .
      dockerfile: services/safety_scoring/dockerfile
    image: saferoute/safety-scoring:latest
    container_name: saferoute-safety-scoring
    platform: linux/amd64
    ports:
      - "20003:20003"
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped

  feedback:
    build:
      context: .
      dockerfile: services/feedback/dockerfile
    image: saferoute/feedback:latest
    container_name: saferoute-feedback
    platform: linux/amd64
    ports:
      - "20004:20004"
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped

  sos:
    build:
      context: .
      dockerfile: services/sos/dockerfile
    image: saferoute/sos:latest
    container_name: saferoute-sos
    platform: linux/amd64
    ports:
      - "20006:20006"
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
